<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>배재대학교 캠퍼스 맵</title>
    <script type="text/javascript"
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=124e4b785cbdd3fc46a37b0abd30547f&autoload=false&libraries=services,clusterer"></script>
    <link rel="icon" href="assets/logo/logo.png">
    <link rel="stylesheet" href="css/style.css?v=<%= new Date().getTime() %>">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <script src="js/db-connect.js" defer></script>
    <script src="js/initmap.js" defer></script>
    <script src="js/getCurrentLocation.js" defer></script>
    <script src="js/searchLocation.js" defer></script>
    <script src="js/category.js" defer></script>
    <script src="js/place-info.js" defer></script>
    <script src="js/place-hidden.js" defer></script>
    <script src=js/serverControl.js" defer></script>
    <script src="js/setvh.js" defer></script>
</head>
    
<body>
    <div id="header">
        <div class="title">
            <img src="assets/logo/title.svg" alt="배재대학교 캠퍼스 맵">
        </div>
    </div>
    
    <div id="container">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="장소를 입력하세요" onkeypress="handleKeyPress(event)">
            <button onclick="searchLocation()">
                <span class="material-icons"> search </span>
            </button>
        </div>

        <div id="menu-button">
            <span class="material-icons"> menu </span>
        </div>

        <div id="place-buttons" class="hidden">
            <button class="place" onclick="getLocation('P')">21세기관 대학본부 ( P ) </button>
            <button class="place" onclick="getLocation('Y')">예술관 ( Y ) </button>
            <button class="place" onclick="getLocation('AM')">아펜젤러기념관 ( AM ) </button>
            <button class="place" onclick="getLocation('G')">국제교류관 ( G ) </button>
            <button class="place" onclick="getLocation('B')">백산관 ( B ) </button>
            <button class="place" onclick="getLocation('W')">우남관 ( W ) </button>
            <button class="place" onclick="getLocation('SP')">스마트배재관 ( SP ) </button>
            <button class="place" onclick="getLocation('A')">아펜젤러관 ( A ) </button>
            <button class="place" onclick="getLocation('J')">자연과학관 ( J ) </button>
            <button class="place" onclick="getLocation('H')">하워드관 ( H ) </button>
            <button class="place" onclick="getLocation('MC')">미래창조관 ( MC ) </button>
            <button class="place" onclick="getLocation('C')">정보과학관 ( C ) </button>
            <button class="place" onclick="getLocation('S')">소월관 ( S ) </button>
            <button class="place" onclick="getLocation('HM')">하워드기념관 ( HM ) </button>
            <button class="place" onclick="getLocation('K')">김옥균관 ( K ) </button>
            <button class="place" onclick="getLocation('L')">중앙도서관 ( L ) </button>
        </div>

        <script>
            const menuButton = document.getElementById("menu-button");
            const menuPanel = document.getElementById("place-buttons");

            menuButton.addEventListener("click", () => {
                menuPanel.classList.toggle("show");
            });
        </script>

        <div id="place-info" style="display: none;">
            <h3 id="place-name"></h3>

            <div id="image-container">
                <img id="place-image" src="" alt="place-image">
            </div>

            <button class="close-btn" onclick="closeInfo()">
                <span class="material-icons"> close </span>
            </button>

            <div id="info-box">
                <h4>층별 정보</h4>
                <p id="floor-info"></p>
            </div>

            <div id="info-box">
                <h4>학과 정보</h4>
                <p id="major-info"></p>
            </div>
        </div>

        <div id="map">
            <div class="category-buttons">
                <button class="category" onclick="searchPlaces('ATM')">
                    <img src="assets/category/은행.svg" alt="ATM">
                    ATM & 은행
                </button>
                
                <button class="category" onclick="searchPlaces('편의점')">
                    <img src="assets/category/편의점.svg" alt="ATM">
                    편의점
                </button>
                
                <button class="category" onclick="searchPlaces('카페')">
                    <img src="assets/category/카페.svg" alt="ATM">
                    카페
                </button>
                
                <button class="category" onclick="searchPlaces('프린터')">
                    <img src="assets/category/프린터.svg" alt="ATM">
                    프린터
                </button>

                <button class="category" onclick="searchPlaces('보건실')">
                    <img src="assets/category/구급상자.svg" alt="보건실">
                    보건실
                </button>
            </div>

            <div class="button-container">
                <button onclick="getCurrentLocation()">
                    <span class="material-icons">my_location</span>
                </button>
            </div>

            <button id="recent-button">내 위치</button>
            
        </div>

        <div id="timetable-container"></div>
    </div>

    <!-- 로딩 메시지와 스피너 표시할 div -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p id="loadingMessage">잠들어있던 서버가 깨어나는 중입니다. 잠시만 기다려 주세요.</p>
    </div>
</body>

</html>
